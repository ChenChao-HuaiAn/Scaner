# AI错误记录

## 错误描述
分支任务结束后，未将todo列表标记完成。

## 具体位置
TODO/onlyoffice-opencv-scanner-todo.md:44-48

## 相关任务内容
#### OnlyOffice环境搭建
- [ ] 克隆OnlyOffice/DocumentServer仓库
- [ ] 搭建本地开发环境（Docker）
- [ ] 验证基本文档编辑功能
- [ ] 熟悉OnlyOffice插件开发文档

## 错误原因
在完成分支任务后，没有及时更新TODO列表的状态，导致任务状态不准确，影响项目进度跟踪。

## 改进措施
1. 在每次完成分支任务后，必须立即更新对应的TODO列表
2. 建立检查清单，确保所有相关文档都已更新
3. 在提交代码前，验证TODO列表的准确性

## 错误描述
任务结束，未及时将本轮对话总结记录在memory.md文件里。

## 错误原因
在完成任务后，没有按照项目规范将对话总结记录到memory.md文件中，导致项目历史记录不完整。

## 改进措施
1. 在每次任务结束时，必须创建或更新memory.md文件
2. 确保memory.md文件包含最近的50次任务总结
3. 建立任务完成检查清单，包括更新memory.md

## 错误描述
结束前未更新"memory.md"文档。任务开始时，未先读取"memory.md"、"lessons.md"文档。

## 错误原因
在任务开始时没有按照项目规范先读取memory.md和lessons.md文档，导致不了解之前的错误记录和项目进展。在任务结束时也没有更新memory.md文档，违反了项目规范。

## 改进措施
1. 在每次任务开始时，必须先读取memory.md和lessons.md文档
2. 在任务结束时，必须更新memory.md文档，记录本次任务总结
3. 建立任务开始和结束的检查清单，确保遵守项目规范

## 错误描述
未优先使用GitHub上现成的开源项目，而是重复开发相同功能。

## 错误原因
在开始任务时，虽然看到了TODO列表中提到要复用GitHub项目，但没有直接使用现有的Document-Scanner-OpenCV项目，而是重新编写了类似的代码。

## 改进措施
1. 严格遵循TODO列表中的复用策略，优先使用现有的开源项目
2. 在开始任何开发工作前，先确认是否有现成的解决方案可以复用
3. 只有在现有项目无法满足需求时，才考虑自定义开发
4. 充分利用开源社区的成果，避免重复造轮子

## 错误描述
直接将github项目克隆到"Source"目录里了，没有保持项目文档的纯洁性。应该将github项目直接克隆到项目根目录。

## 错误原因
在克隆react-native-document-scanner项目时，错误地将其放入了Source目录，而根据项目规范，GitHub克隆的项目应该直接放在项目根目录，以保持项目文档的纯洁性。

## 改进措施
1. 严格遵守项目规范：GitHub克隆的项目直接放在项目根目录
2. Source目录仅用于存放自研代码和修改后的代码
3. 在执行克隆操作前，先确认目标目录是否符合项目规范
4. 建立检查清单，确保目录结构符合项目要求

## 错误描述
使用list_files工具时没有彻底、仔细地查找目录和文件，导致错误地认为项目根目录没有react-native-document-scanner目录。

## 错误原因
在使用list_files工具进行非递归目录列表时，可能由于工具限制或缓存问题，没有显示所有存在的目录。在分析问题时过于依赖不完整的工具输出，而没有进行更全面的验证。

## 改进措施
1. 在使用任何文件查找工具时，要进行多次验证，使用不同的方法确认结果
2. 当工具输出与实际情况不符时，要深入调查工具的限制和可能的问题
3. 对于关键的路径和文件存在性验证，要使用多种方式交叉验证
4. 在做出结论前，确保已经彻底、仔细地检查了所有相关信息

## 错误描述
在分析React Native项目构建问题时，没有充分考虑版本兼容性问题，导致花费大量时间调试路径配置，而忽略了根本的版本不兼容问题。

## 错误原因
react-native-document-scanner是一个非常老的项目（peerDependencies指定react-native 0.49.3），而主项目使用的是react-native 0.73.0和AGP 8.6.1，这种巨大的版本差异导致了构建失败。

## 改进措施
1. 在集成第三方库时，首先要检查版本兼容性
2. 对于老版本的库，要考虑是否需要寻找替代方案或进行重大修改
3. 在调试构建问题时，要同时考虑路径配置和版本兼容性两个方面
4. 建立版本兼容性检查清单，在项目开始时就验证所有依赖的兼容性

## 错误描述
OpenCV 3.1.0 库与现代Android构建工具链（AGP 7.4.2+）存在严重兼容性问题，导致dexing过程中的NullPointerException，无法成功构建APK。

## 错误原因
OpenCV 3.1.0 是一个非常老的版本（2016年发布），其二进制库文件与现代D8 dex编译器不兼容。即使修复了所有Java代码层面的兼容性问题，底层C++库的ABI兼容性问题仍然无法解决。

## 改进措施
1. 在选择计算机视觉库时，优先选择维护活跃、支持现代Android版本的库
2. 考虑使用纯JavaScript实现的文档边缘检测方案，避免原生库兼容性问题
3. 如果必须使用OpenCV，应选择4.x版本并确保与目标Android版本兼容
4. 在项目初期就验证所有依赖库的构建兼容性，避免后期发现无法解决的底层兼容性问题