# 移动端原型验证计划

## 1. 背景说明
由于项目已从旧的 `react-native-document-scanner` 切换到新的 `react-native-live-detect-edges` 库，需要重新验证移动端是否能正常工作。根据 TODO 文件显示，集成工作已在 2026-02-26 完成，但需要实际测试验证。

## 2. 验证目标
- 确认 `react-native-live-detect-edges` 在 Android 设备上能正常运行
- 验证实时边缘检测功能是否正常工作
- 测试拍照和裁剪功能是否正常
- 确认应用不会崩溃或出现严重错误

## 3. 验证步骤

### 3.1 环境准备
- [ ] 确保 Android 设备已连接并启用 USB 调试
- [ ] 确认 ADB 工具正常工作 (`adb devices`)
- [ ] 确保 Metro 开发服务器可以启动

### 3.2 构建和安装
- [ ] 启动 Metro 服务器: `npx react-native start`
- [ ] 构建并安装到设备: `npx react-native run-android`
- [ ] 处理可能的构建错误

### 3.3 功能测试
- [ ] 验证相机权限请求是否正常
- [ ] 测试实时边缘检测显示是否正常
- [ ] 测试拍照功能是否能成功捕获图像
- [ ] 验证裁剪后的图像是否正确生成
- [ ] 测试手动裁剪功能
- [ ] 验证预览页面是否正常显示

### 3.4 错误处理
- [ ] 测试在没有相机权限的情况下应用行为
- [ ] 测试低内存设备上的性能表现
- [ ] 验证错误提示是否友好

## 4. 预期结果
- 应用能够正常启动并请求相机权限
- 实时边缘检测能够正确识别文档边界
- 拍照功能能够成功捕获并裁剪图像
- 所有功能在主流 Android 设备上稳定运行

## 5. 风险评估
- **高风险**: 新库可能存在未发现的兼容性问题
- **中风险**: 不同 Android 设备的相机 API 差异可能导致功能异常
- **低风险**: 性能问题在低端设备上可能出现

## 6. 备用方案
如果 `react-native-live-detect-edges` 无法正常工作，考虑以下替代方案：
1. 回退到修复后的 `react-native-document-scanner`（需要解决 OpenCV 兼容性问题）
2. 寻找其他现代化的文档扫描库
3. 实现纯 JavaScript 的边缘检测方案

## 7. 验证完成标准
- [ ] 在至少一台 Android 设备上成功运行所有核心功能
- [ ] 生成可分发的 APK 并验证其功能
- [ ] 更新 TODO 列表标记验证完成
- [ ] 记录验证结果和任何发现的问题